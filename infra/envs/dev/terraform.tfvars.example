project_id  = "dataanalyticsclinic"
region      = "asia-northeast1"
environment = "dev"

network_name   = "creative-flow-studio-vpc"
subnet_cidr    = "10.10.0.0/20"
connector_cidr = "10.8.0.0/28" # Serverless Connector 専用 /28。既存サブネットと重複禁止
psa_address    = "10.9.0.0"    # Private Service Connect 用レンジ (/24 の開始アドレス。VPC 内で未使用のブロックを選ぶ)
psa_prefix_length = 24         # /24 程度を推奨。/16 以上は避ける

cloud_sql_instance_name = "creative-flow-studio-sql"
cloud_sql_tier          = "db-f1-micro"
cloud_sql_disk_size_gb  = 20
cloud_sql_user          = "app_user"
cloud_sql_db_name       = "creative_flow_studio"

cloud_run_sa_email = "cloud-run-runtime@dataanalyticsclinic.iam.gserviceaccount.com"
cloud_build_sa_email = "667780715339@cloudbuild.gserviceaccount.com"
cloud_build_service_agent_email = "service-<project-number>@gcp-sa-cloudbuild.iam.gserviceaccount.com"
cloud_run_service_name = "creative-flow-studio-dev"
artifact_repo_id       = "creative-flow-studio"
cloud_run_image        = "asia-northeast1-docker.pkg.dev/dataanalyticsclinic/creative-flow-studio/app:latest"
cloud_run_port         = 8080
cloud_run_cpu          = "1"
cloud_run_memory       = "1Gi"
cloud_run_timeout_seconds = 300
cloud_run_concurrency     = 80
cloud_run_min_instances   = 0
cloud_run_max_instances   = 5
cloud_run_ingress         = "INGRESS_TRAFFIC_ALL"
cloud_run_allow_unauthenticated = true

cloud_run_env_vars = {
  # IMPORTANT: NEXTAUTH_URL must match your production domain for OAuth to work correctly
  # This URL is used for OAuth redirect URI resolution
  NEXTAUTH_URL                      = "https://blunaai.com"
  NEXT_PUBLIC_APP_URL               = "https://blunaai.com"
  NEXT_PUBLIC_SUPABASE_URL          = "https://your-project.supabase.co"
  NEXT_PUBLIC_SUPABASE_ANON_KEY     = "SUPABASE_ANON_KEY_PLACEHOLDER"
  NEXT_PUBLIC_STRIPE_PUBLISHABLE_KEY = "pk_test_CHANGE_ME_FROM_STRIPE_DASHBOARD"
}

cloud_run_secret_env_vars = {
  # ENV 名 -> secrets モジュールで作成した secret_id。Terraform 側で自動的にフルリソース名へ変換されます。
  DATABASE_URL              = "database-url"
  NEXTAUTH_SECRET           = "nextauth-secret"
  GOOGLE_CLIENT_ID          = "google-client-id"
  GOOGLE_CLIENT_SECRET      = "google-client-secret"
  SUPABASE_SERVICE_ROLE_KEY = "supabase-service-role"
  STRIPE_SECRET_KEY         = "stripe-secret-key"
  STRIPE_WEBHOOK_SECRET     = "stripe-webhook-secret"
  GEMINI_API_KEY            = "gemini-api-key"
}

secret_values = {
  # apply 前に必ず実値へ置き換えてください。ダミーのまま apply すると Secret にプレースホルダが登録されます。
  # database-url は自動生成されるため、ここに記入する必要はありません。
  "nextauth-secret"        = "CHANGE_ME_GENERATE_WITH_OPENSSL_RAND_BASE64_32"
  "google-client-id"       = "CHANGE_ME_FROM_GOOGLE_CLOUD_CONSOLE"
  "google-client-secret"   = "CHANGE_ME_FROM_GOOGLE_CLOUD_CONSOLE"
  "supabase-service-role"  = "CHANGE_ME_FROM_SUPABASE_DASHBOARD"
  "stripe-secret-key"      = "sk_test_CHANGE_ME_FROM_STRIPE_DASHBOARD"
  "stripe-webhook-secret"  = "whsec_CHANGE_ME_FROM_STRIPE_WEBHOOK_SETTINGS"
  "gemini-api-key"         = "CHANGE_ME_FROM_GOOGLE_AI_STUDIO"
}
